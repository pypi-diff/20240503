# Comparing `tmp/odoo_addon_tracking_manager-16.0.1.1.0-py3-none-any.whl.zip` & `tmp/odoo_addon_tracking_manager-17.0.1.0.0.2-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,33 +1,33 @@
-Zip file size: 201192 bytes, number of entries: 31
--rw-r--r--  2.0 unx     4340 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/README.rst
--rw-r--r--  2.0 unx       21 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/__init__.py
--rw-r--r--  2.0 unx      880 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/__manifest__.py
--rw-r--r--  2.0 unx      289 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/tools.py
--rw-r--r--  2.0 unx     4881 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/i18n/es.po
--rw-r--r--  2.0 unx     5732 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/i18n/fr.po
--rw-r--r--  2.0 unx     4865 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/i18n/it.po
--rw-r--r--  2.0 unx     4129 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/i18n/tracking_manager.pot
--rw-r--r--  2.0 unx      553 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/migrations/16.0.1.0.3/post-migration.py
--rw-r--r--  2.0 unx      104 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/models/__init__.py
--rw-r--r--  2.0 unx     7256 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/models/ir_model.py
--rw-r--r--  2.0 unx      621 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/models/mail_thread.py
--rw-r--r--  2.0 unx      816 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/models/mail_tracking_value.py
--rw-r--r--  2.0 unx     5722 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/models/models.py
--rw-r--r--  2.0 unx       90 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      296 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      657 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/readme/USAGE.rst
--rw-r--r--  2.0 unx    73886 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/static/description/fields.png
--rw-r--r--  2.0 unx     9455 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/static/description/icon.png
--rw-r--r--  2.0 unx    14195 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/static/description/index.html
--rw-r--r--  2.0 unx    95597 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/static/description/model_view.png
--rw-r--r--  2.0 unx       36 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/tests/__init__.py
--rw-r--r--  2.0 unx      389 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/tests/models.py
--rw-r--r--  2.0 unx     9728 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/tests/test_tracking_manager.py
--rw-r--r--  2.0 unx     2954 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/views/ir_model.xml
--rw-r--r--  2.0 unx     2515 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/views/ir_model_fields.xml
--rw-r--r--  2.0 unx     2550 b- defN 24-Apr-09 19:36 odoo/addons/tracking_manager/views/message_template.xml
--rw-r--r--  2.0 unx     4962 b- defN 24-Apr-09 19:36 odoo_addon_tracking_manager-16.0.1.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-09 19:36 odoo_addon_tracking_manager-16.0.1.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Apr-09 19:36 odoo_addon_tracking_manager-16.0.1.1.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3257 b- defN 24-Apr-09 19:36 odoo_addon_tracking_manager-16.0.1.1.0.dist-info/RECORD
-31 files, 260873 bytes uncompressed, 195692 bytes compressed:  25.0%
+Zip file size: 201482 bytes, number of entries: 31
+-rw-r--r--  2.0 unx     4407 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/__init__.py
+-rw-r--r--  2.0 unx      771 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/__manifest__.py
+-rw-r--r--  2.0 unx      289 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/tools.py
+-rw-r--r--  2.0 unx     4881 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/i18n/es.po
+-rw-r--r--  2.0 unx     5732 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/i18n/fr.po
+-rw-r--r--  2.0 unx     4865 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/i18n/it.po
+-rw-r--r--  2.0 unx     4029 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/i18n/tracking_manager.pot
+-rw-r--r--  2.0 unx      134 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/__init__.py
+-rw-r--r--  2.0 unx     5946 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/ir_model.py
+-rw-r--r--  2.0 unx     2010 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/ir_model_fields.py
+-rw-r--r--  2.0 unx      621 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/mail_thread.py
+-rw-r--r--  2.0 unx      764 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/mail_tracking_value.py
+-rw-r--r--  2.0 unx     5717 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/models/models.py
+-rw-r--r--  2.0 unx       98 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/readme/CONTRIBUTORS.md
+-rw-r--r--  2.0 unx      296 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/readme/DESCRIPTION.md
+-rw-r--r--  2.0 unx      666 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/readme/USAGE.md
+-rw-r--r--  2.0 unx    73886 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/static/description/fields.png
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/static/description/icon.png
+-rw-r--r--  2.0 unx    14055 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/static/description/index.html
+-rw-r--r--  2.0 unx    95597 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/static/description/model_view.png
+-rw-r--r--  2.0 unx       36 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/tests/__init__.py
+-rw-r--r--  2.0 unx      389 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/tests/models.py
+-rw-r--r--  2.0 unx     9945 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/tests/test_tracking_manager.py
+-rw-r--r--  2.0 unx     2809 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/views/ir_model.xml
+-rw-r--r--  2.0 unx     2515 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/views/ir_model_fields.xml
+-rw-r--r--  2.0 unx     2550 b- defN 24-May-02 13:16 odoo/addons/tracking_manager/views/message_template.xml
+-rw-r--r--  2.0 unx     4978 b- defN 24-May-02 13:16 odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/METADATA
+-rw-r--r--  2.0 unx       83 b- defN 24-May-02 13:16 odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/WHEEL
+-rw-r--r--  2.0 unx        4 b- defN 24-May-02 13:16 odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3249 b- defN 24-May-02 13:16 odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/RECORD
+31 files, 260798 bytes uncompressed, 196000 bytes compressed:  24.8%
```

## zipnote {}

```diff
@@ -18,39 +18,39 @@
 
 Filename: odoo/addons/tracking_manager/i18n/it.po
 Comment: 
 
 Filename: odoo/addons/tracking_manager/i18n/tracking_manager.pot
 Comment: 
 
-Filename: odoo/addons/tracking_manager/migrations/16.0.1.0.3/post-migration.py
-Comment: 
-
 Filename: odoo/addons/tracking_manager/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/tracking_manager/models/ir_model.py
 Comment: 
 
+Filename: odoo/addons/tracking_manager/models/ir_model_fields.py
+Comment: 
+
 Filename: odoo/addons/tracking_manager/models/mail_thread.py
 Comment: 
 
 Filename: odoo/addons/tracking_manager/models/mail_tracking_value.py
 Comment: 
 
 Filename: odoo/addons/tracking_manager/models/models.py
 Comment: 
 
-Filename: odoo/addons/tracking_manager/readme/CONTRIBUTORS.rst
+Filename: odoo/addons/tracking_manager/readme/CONTRIBUTORS.md
 Comment: 
 
-Filename: odoo/addons/tracking_manager/readme/DESCRIPTION.rst
+Filename: odoo/addons/tracking_manager/readme/DESCRIPTION.md
 Comment: 
 
-Filename: odoo/addons/tracking_manager/readme/USAGE.rst
+Filename: odoo/addons/tracking_manager/readme/USAGE.md
 Comment: 
 
 Filename: odoo/addons/tracking_manager/static/description/fields.png
 Comment: 
 
 Filename: odoo/addons/tracking_manager/static/description/icon.png
 Comment: 
@@ -75,20 +75,20 @@
 
 Filename: odoo/addons/tracking_manager/views/ir_model_fields.xml
 Comment: 
 
 Filename: odoo/addons/tracking_manager/views/message_template.xml
 Comment: 
 
-Filename: odoo_addon_tracking_manager-16.0.1.1.0.dist-info/METADATA
+Filename: odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_tracking_manager-16.0.1.1.0.dist-info/WHEEL
+Filename: odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_tracking_manager-16.0.1.1.0.dist-info/top_level.txt
+Filename: odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_tracking_manager-16.0.1.1.0.dist-info/RECORD
+Filename: odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/tracking_manager/README.rst

```diff
@@ -3,87 +3,99 @@
 ================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:a7d5bd552b419ff6e2058562ce30c52387acbe3f01cbd1ec3804a78a9fc5a1c9
+   !! source digest: sha256:f9cc75fa1b0588ea2b6b5dfad5e78e5e8f8c23bd04ae65a1a61ff046d8303410
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fserver--tools-lightgray.png?logo=github
-    :target: https://github.com/OCA/server-tools/tree/16.0/tracking_manager
+    :target: https://github.com/OCA/server-tools/tree/17.0/tracking_manager
     :alt: OCA/server-tools
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/server-tools-16-0/server-tools-16-0-tracking_manager
+    :target: https://translation.odoo-community.org/projects/server-tools-17-0/server-tools-17-0-tracking_manager
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/server-tools&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/server-tools&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This module allows to track all fields on every model that has a chatter, including one2many and many2many ones. This excludes the computed, readonly, related fields by default.
-In addition, line changes of a one2many field can be tracked (e.g. product_uom_qty of an order_line in a sale order).
+This module allows to track all fields on every model that has a
+chatter, including one2many and many2many ones. This excludes the
+computed, readonly, related fields by default. In addition, line changes
+of a one2many field can be tracked (e.g. product_uom_qty of an
+order_line in a sale order).
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Usage
 =====
 
-- In setting > models: select a model
-- Check "Active" under Custom Tracking.
-- You have two options - 1) manually configure tracked fields one by one, or 2) determine tracked fields based on a specific domain.
-- For 1) manually configure tracked fields one by one
-  - Click on Tracked Fields smart button, and select/unselect Custom Tracking.
-- For 2) determine tracked fields based on a specific domain
-  - Select "Automatic configuration", and then set the domain accordingly.
-  - Click "Update" for the domain to take effect.
+-  In setting > models: select a model
+-  Check "Active" under Custom Tracking.
+-  You have two options - 1) manually configure tracked fields one by
+   one, or 2) determine tracked fields based on a specific domain.
+-  For 1) manually configure tracked fields one by one
 
-.. image:: https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/model_view.png
+   -  Click on Tracked Fields smart button, and select/unselect Custom
+      Tracking.
 
-- Then select the fields to track
+-  For 2) determine tracked fields based on a specific domain
 
-.. image:: https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/fields.png
+   -  Select "Automatic configuration", and then set the domain
+      accordingly.
+   -  Click "Update" for the domain to take effect.
+
+|image|
+
+-  Then select the fields to track
+
+|image1|
+
+.. |image| image:: https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/model_view.png
+.. |image1| image:: https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/fields.png
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/server-tools/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * Akretion
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Kévin Roche <kevin.roche@akretion.com>
-* Sébastien BEAU <sebastien.beau@akretion.com>
+-  Kévin Roche <kevin.roche@akretion.com>
+-  Sébastien BEAU <sebastien.beau@akretion.com>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -98,10 +110,10 @@
     :target: https://github.com/sebastienbeau
     :alt: sebastienbeau
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-Kev-Roche| |maintainer-sebastienbeau| 
 
-This module is part of the `OCA/server-tools <https://github.com/OCA/server-tools/tree/16.0/tracking_manager>`_ project on GitHub.
+This module is part of the `OCA/server-tools <https://github.com/OCA/server-tools/tree/17.0/tracking_manager>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
```

## odoo/addons/tracking_manager/__manifest__.py

```diff
@@ -2,28 +2,22 @@
 # @author Kévin Roche <kevin.roche@akretion.com>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 {
     "name": "Tracking Manager",
     "summary": """This module tracks all fields of a model,
                 including one2many and many2many ones.""",
-    "version": "16.0.1.1.0",
+    "version": "17.0.1.0.0",
     "category": "Tools",
     "website": "https://github.com/OCA/server-tools",
     "author": "Akretion, Odoo Community Association (OCA)",
     "maintainers": ["Kev-Roche", "sebastienbeau"],
     "license": "AGPL-3",
     "application": False,
     "installable": True,
-    "depends": [
-        "base",
-        "mail",
-    ],
-    "external_dependencies": {
-        "python": ["odoo_test_helper"],
-    },
+    "depends": ["mail"],
     "data": [
         "views/ir_model_fields.xml",
         "views/ir_model.xml",
         "views/message_template.xml",
     ],
 }
```

## odoo/addons/tracking_manager/i18n/tracking_manager.pot

```diff
@@ -1,14 +1,14 @@
 # Translation of Odoo Server.
 # This file contains the translation of the following modules:
 # 	* tracking_manager
 #
 msgid ""
 msgstr ""
-"Project-Id-Version: Odoo Server 16.0\n"
+"Project-Id-Version: Odoo Server 17.0\n"
 "Report-Msgid-Bugs-To: \n"
 "Last-Translator: \n"
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
@@ -40,19 +40,14 @@
 
 #. module: tracking_manager
 #: model:ir.model.fields,field_description:tracking_manager.field_ir_model__automatic_custom_tracking
 msgid "Automatic Custom Tracking"
 msgstr ""
 
 #. module: tracking_manager
-#: model:ir.model.fields,field_description:tracking_manager.field_ir_model__automatic_custom_tracking_domain
-msgid "Automatic Custom Tracking Domain"
-msgstr ""
-
-#. module: tracking_manager
 #: model_terms:ir.ui.view,arch_db:tracking_manager.view_model_form
 msgid "Automatic configuration"
 msgstr ""
 
 #. module: tracking_manager
 #: model:ir.model,name:tracking_manager.model_base
 msgid "Base"
@@ -76,15 +71,15 @@
 
 #. module: tracking_manager
 #: model_terms:ir.ui.view,arch_db:tracking_manager.view_model_track_fields_search
 msgid "Custom Tracking ON"
 msgstr ""
 
 #. module: tracking_manager
-#: model_terms:ir.ui.view,arch_db:tracking_manager.view_model_form
+#: model:ir.model.fields,field_description:tracking_manager.field_ir_model__automatic_custom_tracking_domain
 msgid "Domain"
 msgstr ""
 
 #. module: tracking_manager
 #: model:ir.model,name:tracking_manager.model_mail_thread
 msgid "Email Thread"
 msgstr ""
@@ -92,15 +87,17 @@
 #. module: tracking_manager
 #: model:ir.model,name:tracking_manager.model_ir_model_fields
 msgid "Fields"
 msgstr ""
 
 #. module: tracking_manager
 #: model:ir.model.fields,help:tracking_manager.field_ir_model__automatic_custom_tracking
-msgid "If tick new field will be automatically tracked if the domain match"
+msgid ""
+"If marked, the fields matching the matched by the domain below will be "
+"automatically tracked for this model."
 msgstr ""
 
 #. module: tracking_manager
 #: model:ir.model,name:tracking_manager.model_mail_tracking_value
 msgid "Mail Tracking Value"
 msgstr ""
```

## odoo/addons/tracking_manager/models/__init__.py

```diff
@@ -1,4 +1,5 @@
 from . import mail_thread
 from . import ir_model
+from . import ir_model_fields
 from . import models
 from . import mail_tracking_value
```

## odoo/addons/tracking_manager/models/ir_model.py

```diff
@@ -1,39 +1,44 @@
 # Copyright (C) 2022 Akretion (<http://www.akretion.com>).
 # @author Kévin Roche <kevin.roche@akretion.com>
 # License AGPL-3.0 or later (http://www.gnu.org/licenses/agpl).
 
 from ast import literal_eval
 
 from odoo import api, fields, models, tools
+from odoo.osv import expression
 
 
 class IrModel(models.Model):
     _inherit = "ir.model"
 
     active_custom_tracking = fields.Boolean()
     tracked_field_count = fields.Integer(compute="_compute_tracked_field_count")
     automatic_custom_tracking = fields.Boolean(
         compute="_compute_automatic_custom_tracking",
         readonly=False,
         store=True,
-        help=("If tick new field will be automatically tracked if the domain match"),
+        help=(
+            "If marked, the fields matching the matched by the domain"
+            " below will be automatically tracked for this model."
+        ),
     )
     automatic_custom_tracking_domain = fields.Char(
+        string="Domain",
         compute="_compute_automatic_custom_tracking_domain",
         store=True,
         readonly=False,
     )
 
     @tools.ormcache()
     def _get_custom_tracked_fields_per_model(self):
         models = self.sudo().search([("active_custom_tracking", "=", True)])
         return {
             model.model: model.field_id.filtered(
-                lambda f: f.custom_tracking
+                lambda f, model=model: f.custom_tracking
                 and self.env[model.model]._fields.get(f.name)
             ).mapped("name")
             for model in models
             if model.model in self.env
         }
 
     @tools.ormcache()
@@ -69,15 +74,15 @@
             if model.model not in self.env:
                 # If the model do not exist skip it (ex: during module update)
                 continue
             if model.model in custom_tracked_fields:
                 tracked_fields = custom_tracked_fields[model.model]
             else:
                 tracked_fields = model.field_id.filtered(
-                    lambda s: not s.readonly
+                    lambda s, model=model: not s.readonly
                     and not s.related
                     and not s.ttype == "one2many"
                     and s.name in self.env[model.model]._fields
                 ).mapped("name")
             res[model.model] = {"fields": tracked_fields, "notify": []}
 
         for field in fields:
@@ -123,16 +128,22 @@
             ],
         }
 
     @api.depends("automatic_custom_tracking")
     def _compute_automatic_custom_tracking_domain(self):
         rules = self._default_automatic_custom_tracking_domain_rules()
         for record in self:
+            automatic_custom_tracking_domain = rules.get(record.model) or rules.get(
+                "default_automatic_rule", []
+            )
+            automatic_custom_tracking_domain = expression.AND(
+                [automatic_custom_tracking_domain, [("model", "=", record.model)]]
+            )
             record.automatic_custom_tracking_domain = str(
-                rules.get(record.model) or rules.get("default_automatic_rule")
+                automatic_custom_tracking_domain
             )
 
     def update_custom_tracking(self):
         for record in self:
             fields = record.field_id.filtered("trackable").filtered_domain(
                 literal_eval(record.automatic_custom_tracking_domain)
             )
@@ -143,64 +154,9 @@
     @api.depends("field_id.custom_tracking")
     def _compute_tracked_field_count(self):
         for rec in self:
             rec.tracked_field_count = len(rec.field_id.filtered("custom_tracking"))
 
     def write(self, vals):
         if "active_custom_tracking" in vals:
-            self.clear_caches()
-        return super().write(vals)
-
-
-class IrModelFields(models.Model):
-    _inherit = "ir.model.fields"
-
-    custom_tracking = fields.Boolean(
-        compute="_compute_custom_tracking",
-        store=True,
-        readonly=False,
-    )
-    native_tracking = fields.Boolean(
-        compute="_compute_native_tracking",
-        store=True,
-    )
-    trackable = fields.Boolean(
-        compute="_compute_trackable",
-        store=True,
-    )
-
-    @api.depends("native_tracking")
-    def _compute_custom_tracking(self):
-        for record in self:
-            if record.model_id.automatic_custom_tracking:
-                domain = literal_eval(record.model_id.automatic_custom_tracking_domain)
-                record.custom_tracking = bool(record.filtered_domain(domain))
-            else:
-                record.custom_tracking = record.native_tracking
-
-    @api.depends("tracking")
-    def _compute_native_tracking(self):
-        for record in self:
-            record.native_tracking = bool(record.tracking)
-
-    @api.depends("related", "store")
-    def _compute_trackable(self):
-        blacklists = [
-            "activity_ids",
-            "message_ids",
-            "message_last_post",
-            "message_main_attachment",
-            "message_main_attachement_id",
-        ]
-
-        for rec in self:
-            rec.trackable = rec.name not in blacklists and rec.store and not rec.related
-
-    def write(self, vals):
-        custom_tracking = None
-        if "custom_tracking" in vals:
-            self.clear_caches()
-            self.check_access_rights("write")
-            custom_tracking = vals.pop("custom_tracking")
-            self._write({"custom_tracking": custom_tracking})
-            self.invalidate_model(fnames=["custom_tracking"])
+            self.env.registry.clear_cache()
         return super().write(vals)
```

## odoo/addons/tracking_manager/models/mail_tracking_value.py

```diff
@@ -6,23 +6,22 @@
 
 from ..tools import format_m2m
 
 
 class MailTrackingValue(models.Model):
     _inherit = "mail.tracking.value"
 
-    def create_tracking_values(
+    def _create_tracking_values(
         self,
         initial_value,
         new_value,
         col_name,
         col_info,
-        tracking_sequence,
-        model_name,
+        record,
     ):
         if col_info["type"] == "many2many":
             col_info["type"] = "text"
             initial_value = format_m2m(initial_value)
             new_value = format_m2m(new_value)
-        return super().create_tracking_values(
-            initial_value, new_value, col_name, col_info, tracking_sequence, model_name
+        return super()._create_tracking_values(
+            initial_value, new_value, col_name, col_info, record
         )
```

## odoo/addons/tracking_manager/models/models.py

```diff
@@ -91,18 +91,18 @@
                     {
                         "name": record._tm_get_field_description(field_name),
                         "messages": messages,
                     }
                     for field_name, messages in messages_by_field.items()
                 ]
                 # use sudo as user may not have access to mail.message
-                record.sudo().message_post_with_view(
+                record.sudo().message_post_with_source(
                     "tracking_manager.track_o2m_m2m_template",
-                    values={"lines": messages},
-                    subtype_id=self.env.ref("mail.mt_note").id,
+                    render_values={"lines": messages},
+                    subtype_xmlid="mail.mt_note",
                 )
 
     def _tm_prepare_o2m_tracking(self):
         fnames = self._tm_get_fields_to_track()
         if not fnames:
             return
         self.env.cr.precommit.add(self._tm_finalize_o2m_tracking)
```

## odoo/addons/tracking_manager/static/description/index.html

```diff
@@ -362,19 +362,22 @@
 <div class="document" id="tracking-manager">
 <h1 class="title">Tracking Manager</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:a7d5bd552b419ff6e2058562ce30c52387acbe3f01cbd1ec3804a78a9fc5a1c9
+!! source digest: sha256:f9cc75fa1b0588ea2b6b5dfad5e78e5e8f8c23bd04ae65a1a61ff046d8303410
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
-<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/server-tools/tree/16.0/tracking_manager"><img alt="OCA/server-tools" src="https://img.shields.io/badge/github-OCA%2Fserver--tools-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/server-tools-16-0/server-tools-16-0-tracking_manager"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/server-tools&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
-<p>This module allows to track all fields on every model that has a chatter, including one2many and many2many ones. This excludes the computed, readonly, related fields by default.
-In addition, line changes of a one2many field can be tracked (e.g. product_uom_qty of an order_line in a sale order).</p>
+<p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/agpl-3.0-standalone.html"><img alt="License: AGPL-3" src="https://img.shields.io/badge/licence-AGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/server-tools/tree/17.0/tracking_manager"><img alt="OCA/server-tools" src="https://img.shields.io/badge/github-OCA%2Fserver--tools-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/server-tools-17-0/server-tools-17-0-tracking_manager"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/server-tools&amp;target_branch=17.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
+<p>This module allows to track all fields on every model that has a
+chatter, including one2many and many2many ones. This excludes the
+computed, readonly, related fields by default. In addition, line changes
+of a one2many field can be tracked (e.g. product_uom_qty of an
+order_line in a sale order).</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
 <ul class="simple">
 <li><a class="reference internal" href="#usage" id="toc-entry-1">Usage</a></li>
 <li><a class="reference internal" href="#bug-tracker" id="toc-entry-2">Bug Tracker</a></li>
 <li><a class="reference internal" href="#credits" id="toc-entry-3">Credits</a><ul>
 <li><a class="reference internal" href="#authors" id="toc-entry-4">Authors</a></li>
@@ -385,33 +388,40 @@
 </ul>
 </div>
 <div class="section" id="usage">
 <h1><a class="toc-backref" href="#toc-entry-1">Usage</a></h1>
 <ul class="simple">
 <li>In setting &gt; models: select a model</li>
 <li>Check “Active” under Custom Tracking.</li>
-<li>You have two options - 1) manually configure tracked fields one by one, or 2) determine tracked fields based on a specific domain.</li>
-<li>For 1) manually configure tracked fields one by one
-- Click on Tracked Fields smart button, and select/unselect Custom Tracking.</li>
-<li>For 2) determine tracked fields based on a specific domain
-- Select “Automatic configuration”, and then set the domain accordingly.
-- Click “Update” for the domain to take effect.</li>
+<li>You have two options - 1) manually configure tracked fields one by
+one, or 2) determine tracked fields based on a specific domain.</li>
+<li>For 1) manually configure tracked fields one by one<ul>
+<li>Click on Tracked Fields smart button, and select/unselect Custom
+Tracking.</li>
 </ul>
-<img alt="https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/model_view.png" src="https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/model_view.png" />
+</li>
+<li>For 2) determine tracked fields based on a specific domain<ul>
+<li>Select “Automatic configuration”, and then set the domain
+accordingly.</li>
+<li>Click “Update” for the domain to take effect.</li>
+</ul>
+</li>
+</ul>
+<p><img alt="image" src="https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/model_view.png" /></p>
 <ul class="simple">
 <li>Then select the fields to track</li>
 </ul>
-<img alt="https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/fields.png" src="https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/fields.png" />
+<p><img alt="image1" src="https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/fields.png" /></p>
 </div>
 <div class="section" id="bug-tracker">
 <h1><a class="toc-backref" href="#toc-entry-2">Bug Tracker</a></h1>
 <p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/server-tools/issues">GitHub Issues</a>.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-<a class="reference external" href="https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
+<a class="reference external" href="https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
 <p>Do not contact contributors directly about support or help with technical issues.</p>
 </div>
 <div class="section" id="credits">
 <h1><a class="toc-backref" href="#toc-entry-3">Credits</a></h1>
 <div class="section" id="authors">
 <h2><a class="toc-backref" href="#toc-entry-4">Authors</a></h2>
 <ul class="simple">
@@ -430,14 +440,14 @@
 <p>This module is maintained by the OCA.</p>
 <a class="reference external image-reference" href="https://odoo-community.org"><img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" /></a>
 <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
 <p>Current <a class="reference external" href="https://odoo-community.org/page/maintainer-role">maintainers</a>:</p>
 <p><a class="reference external image-reference" href="https://github.com/Kev-Roche"><img alt="Kev-Roche" src="https://github.com/Kev-Roche.png?size=40px" /></a> <a class="reference external image-reference" href="https://github.com/sebastienbeau"><img alt="sebastienbeau" src="https://github.com/sebastienbeau.png?size=40px" /></a></p>
-<p>This module is part of the <a class="reference external" href="https://github.com/OCA/server-tools/tree/16.0/tracking_manager">OCA/server-tools</a> project on GitHub.</p>
+<p>This module is part of the <a class="reference external" href="https://github.com/OCA/server-tools/tree/17.0/tracking_manager">OCA/server-tools</a> project on GitHub.</p>
 <p>You are welcome to contribute. To learn how please visit <a class="reference external" href="https://odoo-community.org/page/Contribute">https://odoo-community.org/page/Contribute</a>.</p>
 </div>
 </div>
 </div>
 </body>
 </html>
```

### html2text {}

```diff
@@ -13,24 +13,24 @@
           o _C_o_n_t_r_i_b_u_t_o_r_s
           o _M_a_i_n_t_a_i_n_e_r_s
 ************ _UU_ss_aa_gg_ee ************
     * In setting > models: select a model
     * Check “Active” under Custom Tracking.
     * You have two options - 1) manually configure tracked fields one by one,
       or 2) determine tracked fields based on a specific domain.
-    * For 1) manually configure tracked fields one by one - Click on Tracked
-      Fields smart button, and select/unselect Custom Tracking.
-    * For 2) determine tracked fields based on a specific domain - Select
-      “Automatic configuration”, and then set the domain accordingly. - Click
-      “Update” for the domain to take effect.
-[https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/
-static/description/model_view.png]
+    * For 1) manually configure tracked fields one by one
+          o Click on Tracked Fields smart button, and select/unselect Custom
+            Tracking.
+    * For 2) determine tracked fields based on a specific domain
+          o Select “Automatic configuration”, and then set the domain
+            accordingly.
+          o Click “Update” for the domain to take effect.
+[image]
     * Then select the fields to track
-[https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/
-static/description/fields.png]
+[image1]
 ************ _BB_uu_gg_ _TT_rr_aa_cc_kk_ee_rr ************
 Bugs are tracked on _G_i_t_H_u_b_ _I_s_s_u_e_s. In case of trouble, please check there if
 your issue has already been reported. If you spotted it first, help us to smash
 it by providing a detailed and welcomed _f_e_e_d_b_a_c_k.
 Do not contact contributors directly about support or help with technical
 issues.
 ************ _CC_rr_ee_dd_ii_tt_ss ************
```

## odoo/addons/tracking_manager/tests/test_tracking_manager.py

```diff
@@ -1,13 +1,14 @@
 # Copyright 2022 Akretion (https://www.akretion.com).
 # @author Kévin Roche <kevin.roche@akretion.com>
 # License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl).
 
 from odoo_test_helper import FakeModelLoader
 
+from odoo import Command
 from odoo.tests.common import TransactionCase
 
 
 class TestTrackingManager(TransactionCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
@@ -26,16 +27,16 @@
                 {"name": "BAR"},
                 {"name": "TOOH"},
             ]
         )
         cls.partner = cls.env["res.partner"].create(
             {
                 "name": "Foo",
-                "bank_ids": [(0, 0, {"acc_number": "007"})],
-                "category_id": [(6, 0, [cls.partner_categ_1.id])],
+                "bank_ids": [(Command.CREATE, 0, {"acc_number": "007"})],
+                "category_id": [(Command.SET, 0, [cls.partner_categ_1.id])],
             }
         )
         cls.partner_model = cls.env.ref("base.model_res_partner")
         cls._active_tracking(["bank_ids", "category_id"])
         cls.flush_tracking()
         cls.partner.message_ids.unlink()
 
@@ -80,48 +81,40 @@
     @property
     def messages(self):
         # Force the creation of tracking values
         self.flush_tracking()
         return self.partner.message_ids
 
     def test_m2m_add_line(self):
+        self.partner = self.env["res.partner"].browse(self.partner.id)
         self.partner.write(
-            {
-                "category_id": [
-                    (
-                        6,
-                        0,
-                        [
-                            self.partner_categ_1.id,
-                            self.partner_categ_2.id,
-                        ],
-                    )
-                ]
-            }
+            {"category_id": [(Command.LINK, self.partner_categ_2.id, 0)]}
         )
         self.assertEqual(len(self.messages), 1)
-        tracking = self.messages.tracking_value_ids
+        tracking = self.messages.tracking_value_ids[0]
         self.assertEqual(len(tracking), 1)
         self.assertEqual(tracking.old_value_text, "FOO")
         self.assertEqual(tracking.new_value_text, "FOO; BAR")
 
     def test_m2m_delete_line(self):
-        self.partner.write({"category_id": [(6, 0, [])]})
+        self.partner.write(
+            {"category_id": [(Command.UNLINK, self.partner_categ_1.id, 0)]}
+        )
         self.assertEqual(len(self.messages), 1)
         tracking = self.messages.tracking_value_ids
         self.assertEqual(len(tracking), 1)
         self.assertEqual(tracking.old_value_text, "FOO")
         self.assertEqual(tracking.new_value_text, "")
 
     def test_m2m_multi_line(self):
         self.partner.write(
             {
                 "category_id": [
                     (
-                        6,
+                        Command.SET,
                         0,
                         [
                             self.partner_categ_2.id,
                             self.partner_categ_3.id,
                         ],
                     )
                 ]
@@ -130,64 +123,72 @@
         self.assertEqual(len(self.messages), 1)
         tracking = self.messages.tracking_value_ids
         self.assertEqual(len(tracking), 1)
         self.assertEqual(tracking.old_value_text, "FOO")
         self.assertEqual(tracking.new_value_text, "BAR; TOOH")
 
     def test_o2m_create_indirectly(self):
-        self.partner.write({"bank_ids": [(0, 0, {"acc_number": "1234567890"})]})
-        self.assertEqual(len(self.messages), 1)
-        self.assertEqual(self.messages.body.count("New"), 1)
+        self.partner.write(
+            {"bank_ids": [(Command.CREATE, 0, {"acc_number": "1234567890"})]}
+        )
+        self.assertEqual(len(self.messages), 2)
+        self.assertEqual(self.messages[0].body.count("New"), 1)
 
     def test_o2m_unlink_indirectly(self):
-        self.partner.write({"bank_ids": [(2, self.partner.bank_ids[0].id)]})
+        self.partner.write(
+            {"bank_ids": [(Command.DELETE, self.partner.bank_ids[0].id)]}
+        )
         self.assertEqual(len(self.messages), 1)
         self.assertIn("Delete", self.messages.body)
 
     def test_o2m_write_indirectly(self):
         self.partner.write(
             {
-                "bank_ids": [(1, self.partner.bank_ids[0].id, {"acc_number": "123"})],
+                "bank_ids": [
+                    (Command.UPDATE, self.partner.bank_ids[0].id, {"acc_number": "123"})
+                ],
             }
         )
         self.assertEqual(len(self.messages), 1)
         self.assertIn("Change", self.messages.body)
 
     def test_o2m_write_indirectly_on_not_tracked_fields(self):
         # Active custom tracking on res.partner.bank and remove tracking on acc_number
         bank_model = self.env["ir.model"].search([("model", "=", "res.partner.bank")])
         bank_model.active_custom_tracking = True
         acc_number = bank_model.field_id.filtered(lambda x: x.name == "acc_number")
         acc_number.custom_tracking = False
         self.partner.write(
             {
-                "bank_ids": [(1, self.partner.bank_ids[0].id, {"acc_number": "123"})],
+                "bank_ids": [
+                    (Command.UPDATE, self.partner.bank_ids[0].id, {"acc_number": "123"})
+                ],
             }
         )
         self.assertEqual(len(self.messages), 0)
 
     def test_o2m_create_and_unlink_indirectly(self):
         self.partner.write(
             {
                 "bank_ids": [
-                    (2, self.partner.bank_ids[0].id, 0),
-                    (0, 0, {"acc_number": "1234567890"}),
+                    (Command.DELETE, self.partner.bank_ids[0].id, 0),
+                    (Command.CREATE, 0, {"acc_number": "1234567890"}),
                 ]
             }
         )
         self.assertEqual(len(self.messages), 1)
         self.assertEqual(self.messages.body.count("New"), 1)
         self.assertEqual(self.messages.body.count("Delete"), 1)
 
     def test_o2m_update_m2m_indirectly(self):
         self.partner.write(
             {
                 "bank_ids": [
                     (
-                        1,
+                        Command.UPDATE,
                         self.partner.bank_ids[0].id,
                         {
                             "category_ids": [
                                 (
                                     6,
                                     0,
                                     [self.partner_categ_1.id, self.partner_categ_2.id],
@@ -202,15 +203,15 @@
         self.assertEqual(self.messages.body.count("Changed"), 1)
 
     def test_o2m_update_m2o_indirectly(self):
         self.partner.write(
             {
                 "bank_ids": [
                     (
-                        1,
+                        Command.UPDATE,
                         self.partner.bank_ids[0].id,
                         {"bank_id": self.env["res.bank"].create({"name": "DOO"}).id},
                     ),
                 ]
             }
         )
         self.assertEqual(len(self.messages), 1)
@@ -223,20 +224,22 @@
         # line._compute_amount() is called manually inside see link behind
         # https://github.com/odoo/odoo/blob/009f35f3d3659792ef18ac510a6ec323708becec/addons/purchase/models/purchase.py#L28 # noqa
         # So we are in a case that we do some change and them we delete them
         # in that case we should only have one message of deletation
         # and no error
         self.partner.write(
             {
-                "bank_ids": [(1, self.partner.bank_ids[0].id, {"acc_number": "123"})],
+                "bank_ids": [
+                    (Command.UPDATE, self.partner.bank_ids[0].id, {"acc_number": "123"})
+                ],
             }
         )
         self.partner.write(
             {
-                "bank_ids": [(2, self.partner.bank_ids[0].id, 0)],
+                "bank_ids": [(Command.DELETE, self.partner.bank_ids[0].id, 0)],
             }
         )
         self.assertEqual(len(self.messages), 1)
         self.assertEqual(self.messages.body.count("Change"), 0)
         self.assertEqual(self.messages.body.count("Delete"), 1)
 
     def test_o2m_create_directly(self):
```

## odoo/addons/tracking_manager/views/ir_model.xml

### odoo/addons/tracking_manager/views/ir_model.xml

```diff
@@ -8,24 +8,24 @@
     <field name="model">ir.model</field>
     <field name="inherit_id" ref="base.view_model_form"/>
     <field name="arch" type="xml">
       <xpath expr="//sheet/group[1]" position="after">
         <group string="Custom Tracking">
           <group>
             <field name="active_custom_tracking" string="Active"/>
-            <field name="automatic_custom_tracking" string="Automatic configuration" attrs="{'invisible': [('active_custom_tracking', '=', False)]}"/>
-            <field name="automatic_custom_tracking_domain" string="Domain" attrs="{                                 'invisible': [('automatic_custom_tracking', '=', False)],                                 'required': [('automatic_custom_tracking', '=', True)],                             }"/>
-            <label for="update_custom_tracking" string="Update fields configuration" attrs="{'invisible': [('automatic_custom_tracking', '=', False)]}"/>
-            <button name="update_custom_tracking" string="Update" icon="fa-refresh" type="object" class="btn-secondary" attrs="{'invisible': [('automatic_custom_tracking', '=', False)]}"/>
+            <field name="automatic_custom_tracking" string="Automatic configuration" invisible="not active_custom_tracking"/>
+            <field name="automatic_custom_tracking_domain" invisible="not automatic_custom_tracking" required="automatic_custom_tracking" widget="domain" options="{'model': 'ir.model.fields', 'in_dialog': True, 'foldable': True}"/>
+            <label for="update_custom_tracking" string="Update fields configuration" invisible="not automatic_custom_tracking"/>
+            <button name="update_custom_tracking" string="Update" icon="fa-refresh" type="object" class="btn-secondary" invisible="not automatic_custom_tracking"/>
           </group>
         </group>
       </xpath>
       <xpath expr="//sheet/group[1]" position="before">
         <div class="oe_button_box" name="button_box">
-          <button name="%(ir_model_fields_action)d" type="action" class="oe_stat_button" icon="fa-server" attrs="{'invisible': [('active_custom_tracking', '=', False)]}">
+          <button name="%(ir_model_fields_action)d" type="action" class="oe_stat_button" icon="fa-server" invisible="not active_custom_tracking">
             <field name="tracked_field_count" widget="statinfo" string="Tracked Fields"/>
           </button>
         </div>
       </xpath>
     </field>
   </record>
 </odoo>
```

## Comparing `odoo/addons/tracking_manager/readme/USAGE.rst` & `odoo/addons/tracking_manager/readme/USAGE.md`

 * *Files 22% similar despite different names*

```diff
@@ -1,14 +1,17 @@
-- In setting > models: select a model
+- In setting \> models: select a model
 - Check "Active" under Custom Tracking.
-- You have two options - 1) manually configure tracked fields one by one, or 2) determine tracked fields based on a specific domain.
+- You have two options - 1) manually configure tracked fields one by
+  one, or 2) determine tracked fields based on a specific domain.
 - For 1) manually configure tracked fields one by one
-  - Click on Tracked Fields smart button, and select/unselect Custom Tracking.
+  - Click on Tracked Fields smart button, and select/unselect Custom
+    Tracking.
 - For 2) determine tracked fields based on a specific domain
-  - Select "Automatic configuration", and then set the domain accordingly.
+  - Select "Automatic configuration", and then set the domain
+    accordingly.
   - Click "Update" for the domain to take effect.
 
-.. image:: ./static/description/model_view.png
+![image](./static/description/model_view.png)
 
 - Then select the fields to track
 
-.. image:: ./static/description/fields.png
+![image](./static/description/fields.png)
```

## Comparing `odoo_addon_tracking_manager-16.0.1.1.0.dist-info/METADATA` & `odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/METADATA`

 * *Files 7% similar despite different names*

```diff
@@ -1,106 +1,116 @@
 Metadata-Version: 2.1
-Name: odoo-addon-tracking-manager
-Version: 16.0.1.1.0
+Name: odoo-addon-tracking_manager
+Version: 17.0.1.0.0.2
+Requires-Python: >=3.10
+Requires-Dist: odoo>=17.0a,<17.1dev
 Summary: This module tracks all fields of a model, including one2many and many2many ones.
 Home-page: https://github.com/OCA/server-tools
+License: AGPL-3
 Author: Akretion, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
-License: AGPL-3
-Platform: UNKNOWN
 Classifier: Programming Language :: Python
 Classifier: Framework :: Odoo
-Classifier: Framework :: Odoo :: 16.0
+Classifier: Framework :: Odoo :: 17.0
 Classifier: License :: OSI Approved :: GNU Affero General Public License v3
-Requires-Python: >=3.10
-Requires-Dist: odoo <16.1dev,>=16.0a
-Requires-Dist: odoo-test-helper
 
 ================
 Tracking Manager
 ================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:a7d5bd552b419ff6e2058562ce30c52387acbe3f01cbd1ec3804a78a9fc5a1c9
+   !! source digest: sha256:f9cc75fa1b0588ea2b6b5dfad5e78e5e8f8c23bd04ae65a1a61ff046d8303410
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-AGPL--3-blue.png
     :target: http://www.gnu.org/licenses/agpl-3.0-standalone.html
     :alt: License: AGPL-3
 .. |badge3| image:: https://img.shields.io/badge/github-OCA%2Fserver--tools-lightgray.png?logo=github
-    :target: https://github.com/OCA/server-tools/tree/16.0/tracking_manager
+    :target: https://github.com/OCA/server-tools/tree/17.0/tracking_manager
     :alt: OCA/server-tools
 .. |badge4| image:: https://img.shields.io/badge/weblate-Translate%20me-F47D42.png
-    :target: https://translation.odoo-community.org/projects/server-tools-16-0/server-tools-16-0-tracking_manager
+    :target: https://translation.odoo-community.org/projects/server-tools-17-0/server-tools-17-0-tracking_manager
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
-    :target: https://runboat.odoo-community.org/builds?repo=OCA/server-tools&target_branch=16.0
+    :target: https://runboat.odoo-community.org/builds?repo=OCA/server-tools&target_branch=17.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-This module allows to track all fields on every model that has a chatter, including one2many and many2many ones. This excludes the computed, readonly, related fields by default.
-In addition, line changes of a one2many field can be tracked (e.g. product_uom_qty of an order_line in a sale order).
+This module allows to track all fields on every model that has a
+chatter, including one2many and many2many ones. This excludes the
+computed, readonly, related fields by default. In addition, line changes
+of a one2many field can be tracked (e.g. product_uom_qty of an
+order_line in a sale order).
 
 **Table of contents**
 
 .. contents::
    :local:
 
 Usage
 =====
 
-- In setting > models: select a model
-- Check "Active" under Custom Tracking.
-- You have two options - 1) manually configure tracked fields one by one, or 2) determine tracked fields based on a specific domain.
-- For 1) manually configure tracked fields one by one
-  - Click on Tracked Fields smart button, and select/unselect Custom Tracking.
-- For 2) determine tracked fields based on a specific domain
-  - Select "Automatic configuration", and then set the domain accordingly.
-  - Click "Update" for the domain to take effect.
+-  In setting > models: select a model
+-  Check "Active" under Custom Tracking.
+-  You have two options - 1) manually configure tracked fields one by
+   one, or 2) determine tracked fields based on a specific domain.
+-  For 1) manually configure tracked fields one by one
+
+   -  Click on Tracked Fields smart button, and select/unselect Custom
+      Tracking.
 
-.. image:: https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/model_view.png
+-  For 2) determine tracked fields based on a specific domain
 
-- Then select the fields to track
+   -  Select "Automatic configuration", and then set the domain
+      accordingly.
+   -  Click "Update" for the domain to take effect.
 
-.. image:: https://raw.githubusercontent.com/OCA/server-tools/16.0/tracking_manager/static/description/fields.png
+|image|
+
+-  Then select the fields to track
+
+|image1|
+
+.. |image| image:: https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/model_view.png
+.. |image1| image:: https://raw.githubusercontent.com/OCA/server-tools/17.0/tracking_manager/static/description/fields.png
 
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/server-tools/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
-`feedback <https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
+`feedback <https://github.com/OCA/server-tools/issues/new?body=module:%20tracking_manager%0Aversion:%2017.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
 
 Do not contact contributors directly about support or help with technical issues.
 
 Credits
 =======
 
 Authors
-~~~~~~~
+-------
 
 * Akretion
 
 Contributors
-~~~~~~~~~~~~
+------------
 
-* Kévin Roche <kevin.roche@akretion.com>
-* Sébastien BEAU <sebastien.beau@akretion.com>
+-  Kévin Roche <kevin.roche@akretion.com>
+-  Sébastien BEAU <sebastien.beau@akretion.com>
 
 Maintainers
-~~~~~~~~~~~
+-----------
 
 This module is maintained by the OCA.
 
 .. image:: https://odoo-community.org/logo.png
    :alt: Odoo Community Association
    :target: https://odoo-community.org
 
@@ -115,12 +125,10 @@
     :target: https://github.com/sebastienbeau
     :alt: sebastienbeau
 
 Current `maintainers <https://odoo-community.org/page/maintainer-role>`__:
 
 |maintainer-Kev-Roche| |maintainer-sebastienbeau| 
 
-This module is part of the `OCA/server-tools <https://github.com/OCA/server-tools/tree/16.0/tracking_manager>`_ project on GitHub.
+This module is part of the `OCA/server-tools <https://github.com/OCA/server-tools/tree/17.0/tracking_manager>`_ project on GitHub.
 
 You are welcome to contribute. To learn how please visit https://odoo-community.org/page/Contribute.
-
-
```

## Comparing `odoo_addon_tracking_manager-16.0.1.1.0.dist-info/RECORD` & `odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/RECORD`

 * *Files 12% similar despite different names*

```diff
@@ -1,31 +1,31 @@
-odoo/addons/tracking_manager/README.rst,sha256=2IHjMN-BxvTFlML_YxGBGyff3bgnojvyBh4cW4GiB3I,4340
+odoo/addons/tracking_manager/README.rst,sha256=wFi7-tEbW9FbHS8JN0BEu6XeMdch-0PyoRdp2Op81VY,4407
 odoo/addons/tracking_manager/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/tracking_manager/__manifest__.py,sha256=sVb5RwFh7xcdIRol3rc81l6eNvacF24STReJe7d1gIM,880
+odoo/addons/tracking_manager/__manifest__.py,sha256=UBqvbqkFUn2GfIkEpPmSrCGzb5O-8Y2q3Mr24x7N8Oc,771
 odoo/addons/tracking_manager/tools.py,sha256=qBHbGn1ptzZqyrarFlGyF7EfXvoxK0Z7UoYQ4W9VGCo,289
 odoo/addons/tracking_manager/i18n/es.po,sha256=sVO_tsvggoF4u3fPGJt94KCi-Tc8HzBgMyNTLzX1Prs,4881
 odoo/addons/tracking_manager/i18n/fr.po,sha256=8jYvKrwayIWrEoV9Rm-OJAvzYyjZL0Lw-FZ1yEFG8Ds,5732
 odoo/addons/tracking_manager/i18n/it.po,sha256=HyLvQfp5j18qE2lXEB1DLUn5X0BeRL108lRJCc6h6XA,4865
-odoo/addons/tracking_manager/i18n/tracking_manager.pot,sha256=HmKUfEHnEJzBQJWVwLusOjuAJNSckVvgcSriHmUtpps,4129
-odoo/addons/tracking_manager/migrations/16.0.1.0.3/post-migration.py,sha256=5ra8SRhnxm4_S4FX0mgCHEPvzf2fO99K_-LWyo9nllE,553
-odoo/addons/tracking_manager/models/__init__.py,sha256=GdroCF4yv782e9maI7LJ8qYEVzfYC9wihZxDOl3yLTw,104
-odoo/addons/tracking_manager/models/ir_model.py,sha256=M1Tozapy-t3_6QyjTyOW5Rtum-wlHTRRksvIm-tXsrs,7256
+odoo/addons/tracking_manager/i18n/tracking_manager.pot,sha256=Q7iA1ciC3zC9nVS2Rw8hVoYaUOtukFX2jrugK0j0V0w,4029
+odoo/addons/tracking_manager/models/__init__.py,sha256=TLPGEd-2q-bpu8agqdxTpdV_ujDsGgxTQOOwUPIQfu0,134
+odoo/addons/tracking_manager/models/ir_model.py,sha256=OzC41He8r1EJF1hq5KJ23u95uPVFHNzfxeUVic6h6Xk,5946
+odoo/addons/tracking_manager/models/ir_model_fields.py,sha256=LCfO3xWZ3-onCRHxJ_Nx0P3_unErFQCbqlj5wEDrODw,2010
 odoo/addons/tracking_manager/models/mail_thread.py,sha256=w1oXz6KIEFQF05LuViGsDX1iM8eGjWkRLktA1kTmypA,621
-odoo/addons/tracking_manager/models/mail_tracking_value.py,sha256=Aumz25KtOBXwfCCKpoA9VJatELsW3_OYYytgSElinXM,816
-odoo/addons/tracking_manager/models/models.py,sha256=UByAgefHiOxVcQKF0MhnL0rKsQdQtt6fMlx9kbuYFXM,5722
-odoo/addons/tracking_manager/readme/CONTRIBUTORS.rst,sha256=i6roA0e_SCQTogYqaKjlHUdWlHDGeY6G4DogCoVfRy8,90
-odoo/addons/tracking_manager/readme/DESCRIPTION.rst,sha256=lJSYsxLKBlVTmady7OJCBd9wl6TaiS-g5aBRJyP1kpQ,296
-odoo/addons/tracking_manager/readme/USAGE.rst,sha256=4LEd_uHytJ7SQz7tIyxXU8Fn8iDOGXWsoFbNrHqG7fg,657
+odoo/addons/tracking_manager/models/mail_tracking_value.py,sha256=AM1lDnRu3vbVeBe7mA_ymQYEKGhzjCtTGP1Ea8OZ028,764
+odoo/addons/tracking_manager/models/models.py,sha256=_3llOUSDym4RUJo9Ht2laYgfjqt9LDyw5kPfjZHfVN0,5717
+odoo/addons/tracking_manager/readme/CONTRIBUTORS.md,sha256=SZJufdX34q4kX-_QKOEkc_WfVq4u0SmjM_xXaTHQW_E,98
+odoo/addons/tracking_manager/readme/DESCRIPTION.md,sha256=vxj2_H-67BUX4EeUFDqMV6-0-nQkd1HppLNPYyK-RdQ,296
+odoo/addons/tracking_manager/readme/USAGE.md,sha256=c_Z8IcOKCCb199FKnceD47zhS02I6tkavLZJCkbgUOE,666
 odoo/addons/tracking_manager/static/description/fields.png,sha256=FVq-67of5T2hHwlDMockmxLiNdVLk9_yKySr0OD2ZO0,73886
 odoo/addons/tracking_manager/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/tracking_manager/static/description/index.html,sha256=9X-jbeUsWVG46SIbOqh9zYHbgfvDtI0h6jfIkv9Zw68,14195
+odoo/addons/tracking_manager/static/description/index.html,sha256=eHlR-WmVYWKWoYqc9FREacmHkxkotgJFAMxFStwgMc8,14055
 odoo/addons/tracking_manager/static/description/model_view.png,sha256=J7R2O2UWznnGq6hk1XHJIyAZMjApfv6li-lvsd9svJo,95597
 odoo/addons/tracking_manager/tests/__init__.py,sha256=leD8-XEnIrpQzCdUdujdurM4Lu65jrkEOAwzdnaZ1aE,36
 odoo/addons/tracking_manager/tests/models.py,sha256=HXvNB0wsv5Qpn9srzgYZ6C5sgbQHuhdr4AfdMax6BpI,389
-odoo/addons/tracking_manager/tests/test_tracking_manager.py,sha256=R9vOxP0qO4MbCwReJGixOKGlJcANNCi6e6QApBkP-gA,9728
-odoo/addons/tracking_manager/views/ir_model.xml,sha256=DeA0H7LN0AEtTVP4dePGKM_MyZ0RYQJctcsc27atmak,2954
+odoo/addons/tracking_manager/tests/test_tracking_manager.py,sha256=mD6qnquV11UIKV_u2eZ-htK0nJDXYP4eTCfEpcYPT38,9945
+odoo/addons/tracking_manager/views/ir_model.xml,sha256=O4cxaJlbxktUlQ54dQv4_jWJFZCxnxVyrZgu_jkKqNM,2809
 odoo/addons/tracking_manager/views/ir_model_fields.xml,sha256=JKAAornvgawg5eCH2jLC8aZ18aWroY0jNpsmpp2oCas,2515
 odoo/addons/tracking_manager/views/message_template.xml,sha256=ABvvxXaDz4kG1HJGScgeJXR5TqRM8r5hxTg5-A9Rpz8,2550
-odoo_addon_tracking_manager-16.0.1.1.0.dist-info/METADATA,sha256=OV-qWPkbTpDDc-Ln84b9P71Pdjc3o4DTjyK4gQtNK8A,4962
-odoo_addon_tracking_manager-16.0.1.1.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_tracking_manager-16.0.1.1.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_tracking_manager-16.0.1.1.0.dist-info/RECORD,,
+odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/METADATA,sha256=7UFVD1_GUrhR5FDWI0B4fT4ek2bnuEZP048cyixoo_M,4978
+odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/WHEEL,sha256=8Rd4enx1PCuyDWP4SABqO5Fv8rpaknqp3VzjoFFLa6c,83
+odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/top_level.txt,sha256=QE6RBQ0QX5f4eFuUcGgU5Kbq1A_qJcDs-e_vpr6pmfU,4
+odoo_addon_tracking_manager-17.0.1.0.0.2.dist-info/RECORD,,
```

