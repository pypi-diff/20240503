# Comparing `tmp/odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7-py3-none-any.whl.zip` & `tmp/odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,29 +1,29 @@
-Zip file size: 36988 bytes, number of entries: 27
--rw-r--r--  2.0 unx     4001 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/README.rst
--rw-r--r--  2.0 unx      144 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/__init__.py
--rw-r--r--  2.0 unx      661 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/__manifest__.py
--rw-r--r--  2.0 unx      630 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/data/ir_server_actions.xml
--rw-r--r--  2.0 unx      722 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/data/message_subtype.xml
--rw-r--r--  2.0 unx     2555 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/account_invoice_change_currency.pot
--rw-r--r--  2.0 unx     3062 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/de.po
--rw-r--r--  2.0 unx     3129 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/es.po
--rw-r--r--  2.0 unx     2638 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/es_MX.po
--rw-r--r--  2.0 unx     2962 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/hr.po
--rw-r--r--  2.0 unx     3110 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/sl.po
--rw-r--r--  2.0 unx     3157 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/i18n/tr.po
--rw-r--r--  2.0 unx       38 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/models/__init__.py
--rw-r--r--  2.0 unx     8685 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/models/account_change_currency.py
--rw-r--r--  2.0 unx      100 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/readme/CONFIGURE.rst
--rw-r--r--  2.0 unx      108 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx      743 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx      119 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/readme/USAGE.rst
--rw-r--r--  2.0 unx     9455 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/static/description/icon.png
--rw-r--r--  2.0 unx    13809 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/static/description/index.html
--rw-r--r--  2.0 unx      174 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/tests/__init__.py
--rw-r--r--  2.0 unx    12010 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/tests/test_account_invoice_change_currency.py
--rw-r--r--  2.0 unx     2464 b- defN 23-Oct-11 02:50 odoo/addons/account_invoice_change_currency/views/account_invoice.xml
--rw-r--r--  2.0 unx     4594 b- defN 23-Oct-11 02:53 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Oct-11 02:53 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 23-Oct-11 02:53 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3275 b- defN 23-Oct-11 02:53 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/RECORD
-27 files, 82442 bytes uncompressed, 31306 bytes compressed:  62.0%
+Zip file size: 36994 bytes, number of entries: 27
+-rw-r--r--  2.0 unx     4001 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/README.rst
+-rw-r--r--  2.0 unx      144 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/__init__.py
+-rw-r--r--  2.0 unx      661 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/__manifest__.py
+-rw-r--r--  2.0 unx      630 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/data/ir_server_actions.xml
+-rw-r--r--  2.0 unx      722 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/data/message_subtype.xml
+-rw-r--r--  2.0 unx     2555 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/account_invoice_change_currency.pot
+-rw-r--r--  2.0 unx     3062 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/de.po
+-rw-r--r--  2.0 unx     3129 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/es.po
+-rw-r--r--  2.0 unx     2638 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/es_MX.po
+-rw-r--r--  2.0 unx     2962 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/hr.po
+-rw-r--r--  2.0 unx     3110 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/sl.po
+-rw-r--r--  2.0 unx     3157 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/i18n/tr.po
+-rw-r--r--  2.0 unx       38 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/models/__init__.py
+-rw-r--r--  2.0 unx     8749 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/models/account_change_currency.py
+-rw-r--r--  2.0 unx      100 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/readme/CONFIGURE.rst
+-rw-r--r--  2.0 unx      108 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx      743 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      119 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/readme/USAGE.rst
+-rw-r--r--  2.0 unx     9455 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/static/description/icon.png
+-rw-r--r--  2.0 unx    13809 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/static/description/index.html
+-rw-r--r--  2.0 unx      174 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/tests/__init__.py
+-rw-r--r--  2.0 unx    12010 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/tests/test_account_invoice_change_currency.py
+-rw-r--r--  2.0 unx     2464 b- defN 24-May-03 09:21 odoo/addons/account_invoice_change_currency/views/account_invoice.xml
+-rw-r--r--  2.0 unx     4594 b- defN 24-May-03 09:21 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-May-03 09:21 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-May-03 09:21 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3275 b- defN 24-May-03 09:21 odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/RECORD
+27 files, 82506 bytes uncompressed, 31312 bytes compressed:  62.0%
```

## zipnote {}

```diff
@@ -63,20 +63,20 @@
 
 Filename: odoo/addons/account_invoice_change_currency/tests/test_account_invoice_change_currency.py
 Comment: 
 
 Filename: odoo/addons/account_invoice_change_currency/views/account_invoice.xml
 Comment: 
 
-Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/METADATA
+Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/METADATA
 Comment: 
 
-Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/WHEEL
+Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/WHEEL
 Comment: 
 
-Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/top_level.txt
+Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/RECORD
+Filename: odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/account_invoice_change_currency/models/account_change_currency.py

```diff
@@ -95,18 +95,20 @@
                 last_currency = self.get_last_rate()[0]
         if not (self.currency_id and
                 last_currency) or self.currency_id == last_currency:
             last_currency = self.company_currency_id
         today = fields.Date.today()
         ctx = {'company_id': self.company_id.id,
                'date': self.date_invoice or today}
-        self.custom_rate = last_currency.with_context(
-            **ctx)._get_conversion_rate(
-                last_currency, self.currency_id, self.company_id,
-                self.date_invoice or today)
+
+        if last_currency and self.currency_id:
+            self.custom_rate = last_currency.with_context(
+                **ctx)._get_conversion_rate(
+                    last_currency, self.currency_id, self.company_id,
+                    self.date_invoice or today)
 
     @api.multi
     def get_last_currency_id(self, skip_update_currency=False):
         self.ensure_one()
         if not self.id:
             return self.currency_id
         subtype_id = self.env.ref(
```

## Comparing `odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/METADATA` & `odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo12-addon-account-invoice-change-currency
-Version: 12.0.1.1.0.99.dev7
+Version: 12.0.1.1.0.99.dev9
 Summary: Allows to change currency of Invoice by wizard
 Home-page: https://github.com/OCA/account-invoicing
 Author: Komit Consulting, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: AGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
```

## Comparing `odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/RECORD` & `odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -7,21 +7,21 @@
 odoo/addons/account_invoice_change_currency/i18n/de.po,sha256=AvKNeZNYCymxNAGbuV8YIdHz7p-QBdpMq9OEL9E8OIo,3062
 odoo/addons/account_invoice_change_currency/i18n/es.po,sha256=K4N1L_K5N93FUKMzm2oOkCdjwt-nu0DQz7pzprZAVVI,3129
 odoo/addons/account_invoice_change_currency/i18n/es_MX.po,sha256=xdeU37bh2PbBy-eoz06d7UEmTuUirbaI0w1t0U9lKJY,2638
 odoo/addons/account_invoice_change_currency/i18n/hr.po,sha256=iQyaNh5mqNuAtBWIRrAc2F3s_DVBnMFmg4za3ryQXBo,2962
 odoo/addons/account_invoice_change_currency/i18n/sl.po,sha256=H3OB9bGmFonz1IQV_wQznU7ObEwNqEBP1lgu_GuCouA,3110
 odoo/addons/account_invoice_change_currency/i18n/tr.po,sha256=uuW4iin6Lg-MjRmV0chAC-1iKC3MzvxZg3jfn87dLl8,3157
 odoo/addons/account_invoice_change_currency/models/__init__.py,sha256=IDilfs77dB9a5XeqqdA3QtbT8HCozY1zghEednh9mCA,38
-odoo/addons/account_invoice_change_currency/models/account_change_currency.py,sha256=LDrwzD3hvQ2Yf1fdeXZfaABDbnPPhOgMqykk_ftS4UA,8685
+odoo/addons/account_invoice_change_currency/models/account_change_currency.py,sha256=W6Q7fpC9fuxIMZxwV8D92f0VXIiUT9L_WcbuI5C2SBw,8749
 odoo/addons/account_invoice_change_currency/readme/CONFIGURE.rst,sha256=w1inUXNbvuw75UScBRSVuB0rIcDfYrL9TEtthBp9cL8,100
 odoo/addons/account_invoice_change_currency/readme/CONTRIBUTORS.rst,sha256=n4ru-JuIv_cj4l6SU0WcZEjW9hSIc0jZC5wpUw2a2hs,108
 odoo/addons/account_invoice_change_currency/readme/DESCRIPTION.rst,sha256=_7lU0OsuX58h4z-Uokve2QTlVERb3nDGtc-q_BX99w0,743
 odoo/addons/account_invoice_change_currency/readme/USAGE.rst,sha256=LU9RDXZDICxGvsJ2JYMAMD78mio6Zl8p_pGIxTGT_iw,119
 odoo/addons/account_invoice_change_currency/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
 odoo/addons/account_invoice_change_currency/static/description/index.html,sha256=VFiufnE1Cyr-Kp_91rSyAuSgoCUgo_BOK1yxW9kgq3U,13809
 odoo/addons/account_invoice_change_currency/tests/__init__.py,sha256=HmVFRX25mTF1ixgsmw2w2-ZC_7jUnEGLuHIbFlvtBgY,174
 odoo/addons/account_invoice_change_currency/tests/test_account_invoice_change_currency.py,sha256=W0eusg7IDqnmuZ1_XWtnCLaUMIztk-5Qh5-OHm1fz8A,12010
 odoo/addons/account_invoice_change_currency/views/account_invoice.xml,sha256=GhcUO541o9ktqCDAiqNbdn-5RMMBSkrA4JjKkkdFT-4,2464
-odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/METADATA,sha256=WuPAwnQYEPPvI1uHU04LJvHst5O-bSrGEc-tB3VveKw,4594
-odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/WHEEL,sha256=yQN5g4mg4AybRjkgi-9yy4iQEFibGQmlz78Pik5Or-A,92
-odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev7.dist-info/RECORD,,
+odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/METADATA,sha256=s23So7vXQFlzBg8gECZRh-JXx9lN66f8ABE24HpAanU,4594
+odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo12_addon_account_invoice_change_currency-12.0.1.1.0.99.dev9.dist-info/RECORD,,
```

